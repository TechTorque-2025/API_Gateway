server:
  port: ":8080"

# IMPORTANT: This secret MUST be identical to the 'jwt.secret' value in your
# Spring Boot application.properties files. Use environment variables in production.
jwt_secret: "YourSuperSecretKeyForJWTGoesHereAndItMustBeVeryLongForSecurityPurposes"

services:
  # --- Authentication Service (Port 8081) ---
  - name: "auth"
    path_prefix: "/api/v1/auth"
    target_url: "http://localhost:8081"
    strip_prefix: "/api/v1/auth"
    auth_required: false # Login/Register must be public
    env_var: "AUTH_SERVICE_URL"

  - name: "users"
    path_prefix: "/api/v1/users"
    target_url: "http://localhost:8081" # Also points to the auth service
    strip_prefix: "/api/v1"
    auth_required: true
    env_var: "AUTH_SERVICE_URL" # Shares the same backend as auth

  # --- Vehicle Service (Port 8082) ---
  - name: "vehicles"
    path_prefix: "/api/v1/vehicles"
    target_url: "http://localhost:8082"
    strip_prefix: "/api/v1"
    auth_required: true
    # env_var not specified - will auto-generate: VEHICLES_SERVICE_URL

  # --- Appointment & Scheduling Service (Port 8083) ---
  # Public availability check (no authentication required)
  - name: "appointments-availability"
    path_prefix: "/api/v1/appointments/availability"
    target_url: "http://localhost:8083"
    strip_prefix: "/api/v1"
    auth_required: false # Public endpoint
    
  # Protected appointment endpoints
  - name: "appointments"
    path_prefix: "/api/v1/appointments"
    target_url: "http://localhost:8083"
    strip_prefix: "/api/v1"
    auth_required: true
    # env_var not specified - will auto-generate: APPOINTMENTS_SERVICE_URL

  # Service Types (also handled by Appointment Service)
  - name: "service-types"
    path_prefix: "/api/v1/service-types"
    target_url: "http://localhost:8083"
    strip_prefix: "/api/v1"
    auth_required: true

  # --- Service & Project Management Service (Port 8084) ---
  - name: "services"
    path_prefix: "/api/v1/services"
    target_url: "http://localhost:8084"
    strip_prefix: "/api/v1"
    auth_required: true
    env_var: "PROJECT_SERVICE_URL" # Points to project service

  - name: "projects"
    path_prefix: "/api/v1/projects"
    target_url: "http://localhost:8084" # Also points to the project service
    strip_prefix: "/api/v1"
    auth_required: true
    env_var: "PROJECT_SERVICE_URL" # Shares the same backend

  # --- Time Logging Service (Port 8085) ---
  - name: "time-logs"
    path_prefix: "/api/v1/time-logs"
    target_url: "http://localhost:8085"
    strip_prefix: "/api/v1"
    auth_required: true
    # env_var not specified - will auto-generate: TIME_LOGS_SERVICE_URL

  # --- Payment & Billing Service (Port 8086) ---
  - name: "payments"
    path_prefix: "/api/v1/payments"
    target_url: "http://localhost:8086"
    strip_prefix: "/api/v1"
    auth_required: true
    env_var: "PAYMENT_SERVICE_URL"

  - name: "invoices"
    path_prefix: "/api/v1/invoices"
    target_url: "http://localhost:8086" # Also points to the payment service
    strip_prefix: "/api/v1"
    auth_required: true
    env_var: "PAYMENT_SERVICE_URL" # Shares the same backend

  # --- Admin & Reporting Service (Port 8087) ---
  - name: "admin"
    path_prefix: "/api/v1/admin"
    target_url: "http://localhost:8087"
    strip_prefix: "/api/v1"
    auth_required: true
    # env_var not specified - will auto-generate: ADMIN_SERVICE_URL

  # --- Notification Service (Port 8088) ---
  - name: "notifications"
    path_prefix: "/api/v1/notifications"
    target_url: "http://localhost:8088"
    strip_prefix: "/api/v1"
    auth_required: true
    # env_var not specified - will auto-generate: NOTIFICATIONS_SERVICE_URL

  # --- Bonus Features (For Later Implementation) ---
  - name: "websocket"
    path_prefix: "/ws/" # Websocket connections might not use the /api/v1 prefix
    target_url: "http://localhost:8088" # Assuming a future port for this service
    strip_prefix: "/ws"
    auth_required: true # The connection itself needs an auth token

  - name: "ai"
    path_prefix: "/api/v1/ai/"
    target_url: "http://localhost:8091" # Agent Bot service (Python FastAPI)
    strip_prefix: "/api/v1/ai"
    auth_required: true
    env_var: "AGENT_BOT_SERVICE_URL"